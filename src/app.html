<!doctype html>
<html lang="en" data-color-mode="%ts:color-mode%">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
		<!-- Chrome Early Hints trial - https://developer.chrome.com/blog/origin-trials/ -->
		<meta
			http-equiv="origin-trial"
			content="AiZVd1wp+hzmekqLXy5WhOkpNq24UuvYqOcJ7ymO1a5jSrO1H/XMoXhFJ60xv+OSSJb6f2EVav/QgPonbWXgvgAAAABqeyJvcmlnaW4iOiJodHRwczovL3RyYWRpbmdzdHJhdGVneS5haTo0NDMiLCJmZWF0dXJlIjoiRWFybHlIaW50c1ByZWxvYWRGb3JOYXZpZ2F0aW9uIiwiZXhwaXJ5IjoxNjQ1NTc0Mzk5fQ=="
		/>
		<link id="font-stylesheet" rel="conditional-stylesheet" href="/fonts/fonts5.css" />
		<script>
			// Implement optimised font loading strategy as per
			// https://github.com/tradingstrategy-ai/design-system/issues/9
			// Implemented as <body> script to trigger this as early as possible.
			// Note: The font CSS itself has a condition that fonts are not loaded on mobile.
			function early() {
				// Do not load fonts on the first load if the visitor is accessing trading data
				// because this cause performance hit and CLS on the page.
				const isTrading = window.location.pathname.includes('trading-view/');
				const hasFontWarmup = window.localStorage.getItem('fontWarmup') === 'true';

				let loadFonts;

				if (isTrading) {
					loadFonts = hasFontWarmup;
				} else {
					loadFonts = true;
				}

				if (loadFonts) {
					const fontStylesheet = document.getElementById('font-stylesheet');
					if (fontStylesheet) {
						fontStylesheet.setAttribute('rel', 'stylesheet');
					}
				}

				window.localStorage.setItem('fontWarmup', 'true');
			}

			early();
		</script>
		%sveltekit.head%
	</head>
	<body>
		<div>%sveltekit.body%</div>
	</body>
</html>
